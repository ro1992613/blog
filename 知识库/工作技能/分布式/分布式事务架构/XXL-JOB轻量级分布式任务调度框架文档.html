<!DOCTYPE html> <html><head>
<title>XXL-JOB轻量级分布式任务调度框架文档</title>
<base href="../../../..">
<meta id="root-path" root-path="../../../..">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
<meta charset="UTF-8">
<meta name="description" content="笔记 - XXL-JOB轻量级分布式任务调度框架文档">
<meta property="og:title" content="XXL-JOB轻量级分布式任务调度框架文档">
<meta property="og:description" content="笔记 - XXL-JOB轻量级分布式任务调度框架文档">
<meta property="og:type" content="website">
<meta property="og:url" content="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html">
<meta property="og:image" content="attachments/63ef3ef2cea1ad8667df2b885a676c6f_md5.png">
<meta property="og:site_name" content="笔记">
<script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6):has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(const t of e){let e=t.getAttribute("src");try{const o=await fetch(e);if(!o.ok){console.log("Could not include file: "+e),t?.remove();continue}let l=await o.text(),n=document.createRange().createContextualFragment(l),c=Array.from(n.children);for(let e of c)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);t.before(n),t.remove(),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script></head><body class="publish css-settings-manager theme-light show-inline-title show-ribbon trim-cols row-lines col-lines table-lines row-hover minimal-notion-light minimal-dracula-dark minimal-readable colorful-headings links-int-on links-ext-on full-width-media is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><div class="search-input-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="XXL-JOB轻量级分布式任务调度框架文档"><p dir="auto">XXL-JOB轻量级分布式任务调度框架文档</p></h1><div class="heading-wrapper"><h2 data-heading="一、简介" dir="auto" class="heading" id="一、简介"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>一、简介</h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="1.1 概述" dir="auto" class="heading" id="1.1_概述"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>1.1 概述</h3><div class="heading-children"><div><p dir="auto">XXL-JOB是一个轻量级<a data-tooltip-position="top" aria-label="https://so.csdn.net/so/search?q=%E5%88%86%E5%B8%83%E5%BC%8F&amp;spm=1001.2101.3001.7020" rel="noopener" class="external-link is-unresolved" href="https://so.csdn.net/so/search?q=%E5%88%86%E5%B8%83%E5%BC%8F&amp;spm=1001.2101.3001.7020" target="_self">分布式</a>任务调度框架，其核心设计目标是开发迅速、学习简单、轻量级、易扩展。现已开放源代码并接入多家公司线上产品线，开箱即用。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="1.2 特性" dir="auto" class="heading" id="1.2_特性"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>1.2 特性</h3><div class="heading-children"><div><p dir="auto">1、简单：支持通过Web页面对任务进行CRUD操作，操作简单，一分钟上手；<br>
2、动态：支持动态修改任务状态、暂停/恢复任务，以及终止运行中任务，即时生效；<br>
3、调度中心HA（中心式）：调度采用中心式设计，“调度中心”基于集群Quartz实现，可保证调度中心HA；<br>
4、执行器HA（分布式）：任务分布式执行，任务"执行器"支持集群部署，可保证任务执行HA；<br>
5、任务Failover：执行器集群部署时，任务路由策略选择"故障转移"情况下调度失败时将会平滑切换执行器进行Failover；<br>
6、一致性：“调度中心”通过DB锁保证集群分布式调度的一致性, 一次任务调度只会触发一次执行；<br>
7、自定义任务参数：支持在线配置调度任务入参，即时生效；<br>
8、调度线程池：调度系统多线程触发调度运行，确保调度精确执行，不被堵塞；<br>
9、弹性扩容缩容：一旦有新执行器机器上线或者下线，下次调度时将会重新分配任务；<br>
10、邮件报警：任务失败时支持邮件报警，支持配置多邮件地址群发报警邮件；<br>
11、状态监控：支持实时监控任务进度；<br>
12、Rolling执行日志：支持在线查看调度结果，并且支持以Rolling方式实时查看执行器输出的完整的执行日志；<br>
13、GLUE：提供Web IDE，支持在线开发任务逻辑代码，动态发布，实时编译生效，省略部署上线的过程。支持30个版本的历史版本回溯。<br>
14、数据加密：调度中心和执行器之间的通讯进行数据加密，提升调度信息安全性；<br>
15、任务依赖：支持配置子任务依赖，当父任务执行结束且执行成功后将会主动触发一次子任务的执行, 多个子任务用逗号分隔；<br>
16、推送maven中央仓库: 将会把最新稳定版推送到maven中央仓库, 方便用户接入和使用;<br>
17、任务注册: 执行器会周期性自动注册任务, 调度中心将会自动发现注册的任务并触发执行。同时，也支持手动录入执行器地址；<br>
18、路由策略：执行器集群部署时提供丰富的路由策略，包括：第一个、最后一个、轮询、随机、一致性HASH、最不经常使用、最近最久未使用、故障转移、忙碌转移等；<br>
19、运行报表：支持实时查看运行数据，如任务数量、调度次数、执行器数量等；以及调度报表，如调度日期分布图，调度成功分布图等；<br>
20、脚本任务：支持以GLUE模式开发和运行脚本任务，包括Shell、Python等类型脚本;<br>
21、阻塞处理策略：调度过于密集执行器来不及处理时的处理策略，策略包括：单机串行（默认）、丢弃后续调度、覆盖之前调度；<br>
22、失败处理策略；调度失败时的处理策略，策略包括：失败告警（默认）、失败重试；<br>
23、分片广播任务：执行器集群部署时，任务路由策略选择"分片广播"情况下，一次任务调度将会广播触发集群中所有执行器执行一次任务，可根据分片参数开发分片任务；<br>
24、动态分片：分片广播任务以执行器为维度进行分片，支持动态扩容执行器集群从而动态增加分片数量，协同进行业务处理；在进行大数据量业务操作时可显著提升任务处理能力和速度。<br>
25、事件触发：除了"Cron方式"和"任务依赖方式"触发任务执行之外，支持基于事件的触发任务方式。调度中心提供触发任务单次执行的API服务，可根据业务事件灵活触发。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="1.3 发展" dir="auto" class="heading" id="1.3_发展"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>1.3 发展</h3><div class="heading-children"><div><p dir="auto">于2015年中，github上创建XXL-JOB项目仓库并提交第一个commit，随之进行系统结构设计，UI选型，交互设计……<br>
于2015-11月，XXL-JOB终于RELEASE了第一个大版本V1.0， 随后我将之发布到OSCHINA，XXL-JOB在OSCHINA上获得了@红薯的热门推荐，同期分别达到了OSCHINA的“热门动弹”排行第一和git.oschina的开源软件月热度排行第一，在此特别感谢红薯，感谢大家的关注和支持。<br>
于2015-12月，我将XXL-JOB发表到我司内部知识库，并且得到内部同事认可。<br>
于2016-01月，我司展开XXL-JOB的内部接入和定制工作，在此感谢袁某和尹某两位同事的贡献，同时也感谢内部其他给与关注与支持的同事。<br>
于2017-05-13，在上海举办的 “第62期开源中国源创会” 的 “放码过来” 环节，我登台对XXL-JOB做了演讲，台下五百位在场观众反响热烈（图文回顾 ）。<br>
我司大众点评目前已接入XXL-JOB，内部别名《Ferrari》（Ferrari基于XXL-JOB的V1.1版本定制而成，新接入应用推荐升级最新版本）。 据最新统计, 自2016-01-21接入至2017-07-07期间，该系统已调度约60万余次，表现优异。新接入应用推荐使用最新版本，因为经过数个大版本的更新，系统的任务模型、UI交互模型以及底层调度通讯模型都有了较大的优化和提升，核心功能更加稳定高效。<br>
至今，XXL-JOB已接入多家公司的线上产品线，接入场景如电商业务，O2O业务和大数据作业等。</p></div><div><p dir="auto">1.4 下载<br>
文档地址<br>
中文文档<br>
English Documentation<br>
源码仓库地址<br>
English Documentation<br>
源码仓库地址<br>
源码仓库地址 Release Download<br>
<a rel="noopener" class="external-link is-unresolved" href="https://github.com/xuxueli/xxl-job" target="_self">https://github.com/xuxueli/xxl-job</a> Download<br>
<a rel="noopener" class="external-link is-unresolved" href="http://git.oschina.net/xuxueli0323/xxl-job" target="_self">http://git.oschina.net/xuxueli0323/xxl-job</a> Download<br>
中央仓库地址</p></div><div><pre dir="auto" class="language-xml" tabindex="0"><code class="language-xml is-loaded">`<span class="token comment">&lt;!-- http://repo1.maven.org/maven2/com/xuxueli/xxl-job-core/ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.xuxueli<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>xxl-job-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.8.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>` 


</code><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="1.5 环境" dir="auto" class="heading" id="1.5_环境"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>1.5 环境</h3><div class="heading-children"><div><p dir="auto">JDK：1.7+<br>
Servlet/JSP Spec：3.1/2.3<br>
Tomcat：8.5.x/Jetty9.2.x<br>
Spring-boot：1.5.x/Spring4.x<br>
Mysql：5.6+<br>
Maven：3+</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="二、快速入门" dir="auto" class="heading" id="二、快速入门"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>二、快速入门</h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="2.1 初始化“调度数据库”" dir="auto" class="heading" id="2.1_初始化“调度数据库”"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>2.1 初始化“调度数据库”</h3><div class="heading-children"><div><p dir="auto">请下载项目源码并解压，获取 “调度数据库初始化SQL脚本” 并执行即可，正常情况下应该生成16张表。<br>
“调度数据库初始化SQL脚本” 位置为:<br>
/xxl-job/doc/db/tables_xxl_job.sql<br>
调度中心支持集群部署，集群情况下各节点务必连接同一个mysql实例;<br>
如果mysql做主从,调度中心集群节点务必强制走主库;</p></div></div></div><div class="heading-wrapper"><h3 data-heading="2.2 编译源码" dir="auto" class="heading" id="2.2_编译源码"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>2.2 编译源码</h3><div class="heading-children"><div><p dir="auto">解压源码,按照maven格式将源码导入IDE, 使用maven进行编译即可，源码结构如下：<br>
xxl-job-admin：调度中心<br>
xxl-job-core：公共依赖<br>
xxl-job-executor：执行器Sample示例（选择合适的版本执行器，可直接使用，也可以参考其并将现有项目改造成执行器）<br>
：xxl-job-executor-sample-spring：Spring版本，通过Spring容器管理执行器，比较通用，推荐这种方式；<br>
：xxl-job-executor-sample-springboot：Springboot版本，通过Springboot管理执行器；<br>
：xxl-job-executor-sample-jfinal：JFinal版本，通过JFinal管理执行器；</p></div></div></div><div class="heading-wrapper"><h3 data-heading="2.3 配置部署“调度中心”" dir="auto" class="heading" id="2.3_配置部署“调度中心”"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>2.3 配置部署“调度中心”</h3><div class="heading-children"><div><p dir="auto">调度中心项目：xxl-job-admin<br>
作用：统一管理任务调度平台上调度任务，负责触发调度执行，并且提供任务管理平台。<br>
<strong>步骤一：调度中心配置：</strong><br>
调度中心配置文件地址：</p></div><div><pre dir="auto"><code>`/xxl-job/xxl-job-admin/src/main/resources/xxl-job-admin.properties` 

</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">调度中心配置内容说明：</p></div><div><pre dir="auto" class="language-properties" tabindex="0"><code class="language-properties is-loaded"><span class="token key attr-name">`###</span> <span class="token value attr-value">调度中心JDBC链接：链接地址请保持和 2.1章节 所创建的调度数据库的地址一致</span>
<span class="token key attr-name">xxl.job.db.driverClass</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">xxl.job.db.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/xxl-job?useUnicode=true&amp;characterEncoding=UTF-8</span>
<span class="token key attr-name">xxl.job.db.user</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">xxl.job.db.password</span><span class="token punctuation">=</span><span class="token value attr-value">root_pwd</span>

<span class="token comment">### 报警邮箱</span>
<span class="token key attr-name">xxl.job.mail.host</span><span class="token punctuation">=</span><span class="token value attr-value">smtp.163.com</span>
<span class="token key attr-name">xxl.job.mail.port</span><span class="token punctuation">=</span><span class="token value attr-value">25</span>
<span class="token key attr-name">xxl.job.mail.username</span><span class="token punctuation">=</span><span class="token value attr-value">ovono802302@163.com</span>
<span class="token key attr-name">xxl.job.mail.password</span><span class="token punctuation">=</span><span class="token value attr-value">asdfzxcv</span>
<span class="token key attr-name">xxl.job.mail.sendFrom</span><span class="token punctuation">=</span><span class="token value attr-value">ovono802302@163.com</span>
<span class="token key attr-name">xxl.job.mail.sendNick</span><span class="token punctuation">=</span><span class="token value attr-value">《任务调度平台XXL-JOB》</span>

<span class="token comment">### 登录账号</span>
<span class="token key attr-name">xxl.job.login.username</span><span class="token punctuation">=</span><span class="token value attr-value">admin</span>
<span class="token key attr-name">xxl.job.login.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
<span class="token comment">### 调度中心通讯TOKEN，非空时启用</span>
<span class="token key attr-name">xxl.job.accessToken</span><span class="token punctuation">=</span><span class="token value attr-value">` </span>

</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><strong>步骤二：部署项目：</strong><br>
如果已经正确进行上述配置，可将项目编译打war包并部署到tomcat中。 调度中心访问地址：<a rel="noopener" class="external-link is-unresolved" href="http://localhost:8080/xxl-job-admin" target="_self">http://localhost:8080/xxl-job-admin</a> (该地址执行器将会使用到，作为回调地址)，登录后运行界面如下图所示<br>
<span alt="63ef3ef2cea1ad8667df2b885a676c6f_MD5.png" src="63ef3ef2cea1ad8667df2b885a676c6f_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="63ef3ef2cea1ad8667df2b885a676c6f_MD5.png" src="attachments/63ef3ef2cea1ad8667df2b885a676c6f_md5.png" target="_self"></span></p></div><div><p dir="auto">至此“调度中心”项目已经部署成功。<br>
<strong>步骤三：调度中心集群（可选）：</strong><br>
调度中心支持集群部署，提升调度系统可用性。<br>
集群部署唯一要求为：保证每个集群节点配置（db和登陆账号等）保持一致。调度中心通过db配置区分不同集群。<br>
调度中心在集群部署时可通过nginx负载均衡，此时可以为集群分配一个域名。该域名一方面可以用于访问，另一方面也可以用于配置执行器回调地址。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="2.4 配置部署“执行器项目”" dir="auto" class="heading" id="2.4_配置部署“执行器项目”"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>2.4 配置部署“执行器项目”</h3><div class="heading-children"><div><p dir="auto">“执行器”项目：xxl-job-executor-sample-spring (如新建执行器项目，可参考该Sample示例执行器项目的配置步骤；)<br>
作用：负责接收“调度中心”的调度并执行；可直接部署执行器，也可以将执行器集成到现有业务项目中。<br>
<strong>步骤一：maven依赖</strong><br>
确认pom文件中引入了 “xxl-job-core” 的maven依赖；<br>
<strong>步骤二：执行器配置</strong><br>
执行器配置，配置文件地址：</p></div><div><pre dir="auto"><code>`/xxl-job/xxl-job-executor-samples/xxl-job-executor-sample-spring/src/main/resources/xxl-job-executor.properties` 

</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">执行器配置，配置内容说明：</p></div><div><pre dir="auto" class="language-properties" tabindex="0"><code class="language-properties is-loaded"><span class="token key attr-name">`###</span> <span class="token value attr-value">xxl-job admin address list：调度中心部署跟地址：如调度中心集群部署存在多个地址则用逗号分隔。执行器将会使用该地址进行"执行器心跳注册"和"任务结果回调"。</span>
<span class="token key attr-name">xxl.job.admin.addresses</span><span class="token punctuation">=</span><span class="token value attr-value">http://127.0.0.1:8080/xxl-job-admin</span>

<span class="token comment">### xxl-job executor address：执行器"AppName"和地址信息配置：AppName执行器心跳注册分组依据；地址信息用于"调度中心请求并触发任务"和"执行器注册"。执行器默认端口为9999，执行器IP默认为空表示自动获取IP，多网卡时可手动设置指定IP，手动设置IP时将会绑定Host。单机部署多个执行器时，注意要配置不同执行器端口；</span>
<span class="token key attr-name">xxl.job.executor.appname</span><span class="token punctuation">=</span><span class="token value attr-value">xxl-job-executor-sample</span>
<span class="token key attr-name">xxl.job.executor.ip</span><span class="token punctuation">=</span>
<span class="token key attr-name">xxl.job.executor.port</span><span class="token punctuation">=</span><span class="token value attr-value">9999</span>

<span class="token comment">### xxl-job log path：执行器运行日志文件存储的磁盘位置，需要对该路径拥有读写权限</span>
<span class="token key attr-name">xxl.job.executor.logpath</span><span class="token punctuation">=</span><span class="token value attr-value">/data/applogs/xxl-job/jobhandler/</span>

<span class="token comment">### xxl-job, access token：执行器通讯TOKEN，非空时启用</span>
<span class="token key attr-name">xxl.job.accessToken</span><span class="token punctuation">=</span><span class="token value attr-value">` </span>


</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><strong>步骤三：执行器组件配置</strong><br>
执行器组件，配置文件地址：</p></div><div><pre dir="auto"><code>`/xxl-job/xxl-job-executor-samples/xxl-job-executor-sample-spring/src/main/resources/applicationcontext-xxl-job.xml` 
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">执行器组件，配置内容说明：</p></div><div><pre dir="auto" class="language-xml" tabindex="0"><code class="language-xml is-loaded">`<span class="token comment">&lt;!-- 配置01、JobHandler 扫描路径：自动扫描容器中JobHandler --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.xxl.job.executor.service.jobhandler<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 配置02、执行器Excutor配置：执行器核心配置 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>xxlJobExecutor<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.xxl.job.core.executor.XxlJobExecutor<span class="token punctuation">"</span></span> <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>start<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>destroy<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 执行器IP[选填]，为空则自动获取 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ip<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${xxl.job.executor.ip}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 执行器端口号[必须] --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>port<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${xxl.job.executor.port}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 执行器AppName[选填]，为空则关闭自动注册 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>appName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${xxl.job.executor.appname}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 执行器注册中心地址[选填]，为空则关闭自动注册 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>adminAddresses<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${xxl.job.admin.addresses}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 执行器日志路径[必填] --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logPath<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${xxl.job.executor.logpath}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- 访问令牌，非空则进行匹配校验[选填] --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accessToken<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${xxl.job.accessToken}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>` 


</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><strong>步骤四：部署执行器项目：</strong><br>
如果已经正确进行上述配置，可将执行器项目编译打部署，系统提供三个执行器Sample示例项目，选择其中一个即可，各自的部署方式如下。</p></div><div><pre dir="auto"><code>`xxl-job-executor-sample-spring：项目编译打包成WAR包，并部署到tomcat中。
xxl-job-executor-sample-springboot：项目编译打包成springboot类型的可执行JAR包，命令启动即可；` 
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">至此“执行器”项目已经部署结束。<br>
<strong>步骤五：执行器集群（可选）：</strong><br>
执行器支持集群部署，提升调度系统可用性，同时提升任务处理能力。<br>
集群部署唯一要求为：保证集群中每个执行器的配置项 “xxl.job.admin.addresses/调度中心地址” 保持一致，执行器根据该配置进行执行器自动注册等操作。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="2.5 开发第一个任务“Hello World”" dir="auto" class="heading" id="2.5_开发第一个任务“Hello_World”"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>2.5 开发第一个任务“Hello World”</h3><div class="heading-children"><div><p dir="auto">本示例以新建一个 “GLUE模式(Java)” 运行模式的任务为例。更多有关任务的详细配置，请查看“章节三：任务详解”。 （ “GLUE模式(Java)”的执行代码托管到调度中心在线维护，相比“Bean模式任务”需要在执行器项目开发部署上线，更加简便轻量）<br>
前提：请确认“调度中心”和“执行器”项目已经成功部署并启动；<br>
<strong>步骤一：新建任务：</strong><br>
登录调度中心，点击下图所示“新建任务”按钮，新建示例任务。然后，参考下面截图中任务的参数配置，点击保存。<br>
<span alt="553c2f130fbdde59e23d744f67c6708c_MD5.png" src="553c2f130fbdde59e23d744f67c6708c_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="553c2f130fbdde59e23d744f67c6708c_MD5.png" src="attachments/553c2f130fbdde59e23d744f67c6708c_md5.png" target="_self"></span></p></div><div><p dir="auto"><span alt="fdf498cc4003625a57c740d3944c1397_MD5.png" src="fdf498cc4003625a57c740d3944c1397_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="fdf498cc4003625a57c740d3944c1397_MD5.png" src="attachments/fdf498cc4003625a57c740d3944c1397_md5.png" target="_self"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="步骤二：“GLUE模式(Java)” 任务开发：" dir="auto" class="heading" id="步骤二：“GLUE模式(Java)”_任务开发："><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>步骤二：“GLUE模式(Java)” 任务开发：</h3><div class="heading-children"><div><p dir="auto">请点击任务右侧 “GLUE” 按钮，进入 “GLUE编辑器开发界面” ，见下图。“GLUE模式(Java)” 运行模式的任务默认已经初始化了示例任务代码，即打印Hello World。 （ “GLUE模式(Java)” 运行模式的任务实际上是一段继承自IJobHandler的Java类代码，它在执行器项目中运行，可使用@Resource/@Autowire注入执行器里中的其他服务，详细介绍请查看第三章节）<br>
<span alt="6152dda2231ed3fbc198f78b09fd3c68_MD5.png" src="6152dda2231ed3fbc198f78b09fd3c68_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="6152dda2231ed3fbc198f78b09fd3c68_MD5.png" src="attachments/6152dda2231ed3fbc198f78b09fd3c68_md5.png" target="_self"></span></p></div><div><p dir="auto"><span alt="f67554ea870aaee07a20984c31c7d61d_MD5.png" src="f67554ea870aaee07a20984c31c7d61d_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="f67554ea870aaee07a20984c31c7d61d_MD5.png" src="attachments/f67554ea870aaee07a20984c31c7d61d_md5.png" target="_self"></span></p></div><div><p dir="auto"><strong>步骤三：触发执行：</strong><br>
请点击任务右侧 “执行” 按钮，可手动触发一次任务执行（通常情况下，通过配置Cron表达式进行任务调度出发）。<br>
<strong>步骤四：查看日志：</strong><br>
请点击任务右侧 “日志” 按钮，可前往任务日志界面查看任务日志。 在任务日志界面中，可查看该任务的历史调度记录以及每一次调度的任务调度信息、执行参数和执行信息。运行中的任务点击右侧的“执行日志”按钮，可进入日志控制台查看实时执行日志。<br>
<span alt="c086f5dcc57fc27b21541eddf223349d_MD5.png" src="c086f5dcc57fc27b21541eddf223349d_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="c086f5dcc57fc27b21541eddf223349d_MD5.png" src="attachments/c086f5dcc57fc27b21541eddf223349d_md5.png" target="_self"></span></p></div><div><p dir="auto">在日志控制台，可以Rolling方式实时查看任务在执行器一侧运行输出的日志信息，实时监控任务进度；<br>
<span alt="c8d8dbdc504ef8a12c3bb2c367241561_MD5.png" src="c8d8dbdc504ef8a12c3bb2c367241561_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="c8d8dbdc504ef8a12c3bb2c367241561_MD5.png" src="attachments/c8d8dbdc504ef8a12c3bb2c367241561_md5.png" target="_self"></span></p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="三、任务详解" dir="auto" class="heading" id="三、任务详解"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>三、任务详解</h2><div class="heading-children"><div><p dir="auto">配置属性详细说明：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">执行器：任务的绑定的执行器，任务触发调度时将会自动发现注册成功的执行器, 实现任务自动发现功能; 另一方面也可以方便的进行任务分组。每个任务必须绑定一个执行器, 可在 “执行器管理” 进行设置;</li>
<li data-line="2" dir="auto">描述：任务的描述信息，便于任务管理；</li>
<li data-line="4" dir="auto">路由策略：当执行器集群部署时，提供丰富的路由策略，包括；<br>
FIRST（第一个）：固定选择第一个执行器；<br>
LAST（最后一个）：固定选择最后一个执行器；<br>
ROUND（轮询）：；<br>
RANDOM（随机）：随机选择在线的执行器；<br>
CONSISTENT_HASH（一致性HASH）：分组下机器地址相同，不同JOB均匀散列在不同机器上，保证分组下机器分配JOB平均；且每个JOB固定调度其中一台机器；<br>
LEAST_FREQUENTLY_USED（最不经常使用）：单个JOB对应的每个执行器，使用频率最低的优先被选举；<br>
LEAST_RECENTLY_USED（最近最久未使用）：单个JOB对应的每个执行器，最久为使用的优先被选举；<br>
FAILOVER（故障转移）：按照顺序依次进行心跳检测，第一个心跳检测成功的机器选定为目标执行器并发起调度；<br>
BUSYOVER（忙碌转移）：按照顺序依次进行空闲检测，第一个空闲检测成功的机器选定为目标执行器并发起调度；<br>
SHARDING_BROADCAST(分片广播)：广播触发对应集群中所有执行器执行一次任务，同时传递分片参数；可根据分片参数开发分片任务；</li>
<li data-line="16" dir="auto">Cron：触发任务执行的Cron表达式；</li>
<li data-line="18" dir="auto">运行模式：<br>
BEAN模式：任务以JobHandler方式维护在执行器端；需要结合 “JobHandler” 属性匹配执行器中任务；<br>
GLUE模式(Java)：任务以源码方式维护在调度中心；该模式的任务实际上是一段继承自IJobHandler的Java类代码并 “groovy” 源码方式维护，它在执行器项目中运行，可使用@Resource/@Autowire注入执行器里中的其他服务；<br>
GLUE模式(Shell)：任务以源码方式维护在调度中心；该模式的任务实际上是一段 “shell” 脚本；<br>
GLUE模式(Python)：任务以源码方式维护在调度中心；该模式的任务实际上是一段 “python” 脚本；<br>
GLUE模式(NodeJS)：任务以源码方式维护在调度中心；该模式的任务实际上是一段 “nodejs” 脚本；</li>
<li data-line="25" dir="auto">JobHandler：运行模式为 “BEAN模式” 时生效，对应执行器中新开发的JobHandler类“@JobHander”注解自定义的value值；</li>
<li data-line="27" dir="auto">子任务Key：每个任务都拥有一个唯一的任务Key(任务Key可以从任务列表获取)，当本任务执行结束并且执行成功时，将会触发子任务Key所对应的任务的一次主动调度。</li>
<li data-line="29" dir="auto">阻塞处理策略：调度过于密集执行器来不及处理时的处理策略；<br>
单机串行（默认）：调度请求进入单机执行器后，调度请求进入FIFO队列并以串行方式运行；<br>
丢弃后续调度：调度请求进入单机执行器后，发现执行器存在运行的调度任务，本次请求将会被丢弃并标记为失败；<br>
覆盖之前调度：调度请求进入单机执行器后，发现执行器存在运行的调度任务，将会终止运行中的调度任务并清空队列，然后运行本地调度任务；</li>
<li data-line="34" dir="auto">失败处理策略；调度失败时的处理策略；<br>
失败告警（默认）：调度失败时，将会触发失败报警，如发送报警邮件；<br>
失败重试：调度失败时，将会主动进行一次失败重试调度，重试调度后仍然失败将会触发一失败告警。注意当任务以failover方式路由时，每次失败重试将会触发新一轮路由。</li>
<li data-line="38" dir="auto">执行参数：任务执行所需的参数，多个参数时用逗号分隔，任务执行时将会把多个参数转换成数组传入；</li>
<li data-line="40" dir="auto">报警邮件：任务调度失败时邮件通知的邮箱地址，支持配置多邮箱地址，配置多个邮箱地址时用逗号分隔；</li>
<li data-line="42" dir="auto">负责人：任务的负责人；</li>
</ul></div><div class="heading-wrapper"><h3 data-heading="\- 3.1 BEAN模式" dir="auto" class="heading" id="\-_3.1_BEAN模式"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>- 3.1 BEAN模式</h3><div class="heading-children"><div><p dir="auto">任务逻辑以JobHandler的形式存在于“执行器”所在项目中，开发流程如下：<br>
步骤一：执行器项目中，开发JobHandler：</p></div><div><pre dir="auto"><code>`- 1、 新建一个继承com.xxl.job.core.handler.IJobHandler的Java类；
- 2、 该类被Spring容器扫描为Bean实例，如加“@Component”注解；
- 3、 添加 “@JobHander(value="自定义jobhandler名称")”注解，注解的value值为自定义的JobHandler名称，该名称对应的是调度中心新建任务的JobHandler属性的值。
（可参考Sample示例执行器中的DemoJobHandler，见下图）` 

</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><span alt="3b7df640c59fc5f177ef883339770c2b_MD5.png" src="3b7df640c59fc5f177ef883339770c2b_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="3b7df640c59fc5f177ef883339770c2b_MD5.png" src="attachments/3b7df640c59fc5f177ef883339770c2b_md5.png" target="_self"></span></p></div><div><p dir="auto"><strong>步骤二：调度中心，新建调度任务</strong><br>
参考上文“配置属性详细说明”对新建的任务进行参数配置，运行模式选中 “BEAN模式”，JobHandler属性填写任务注解@JobHander中定义的值；<br>
<span alt="51551f8976c3e258573a52c7df7778e1_MD5.png" src="51551f8976c3e258573a52c7df7778e1_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="51551f8976c3e258573a52c7df7778e1_MD5.png" src="attachments/51551f8976c3e258573a52c7df7778e1_md5.png" target="_self"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="3.2 GLUE模式(Java)" dir="auto" class="heading" id="3.2_GLUE模式(Java)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>3.2 GLUE模式(Java)</h3><div class="heading-children"><div><p dir="auto">任务以源码方式维护在调度中心，支持通过Web IDE在线更新，实时编译和生效，因此不需要指定JobHandler。开发流程如下：<br>
<strong>步骤一：调度中心，新建调度任务：</strong><br>
参考上文“配置属性详细说明”对新建的任务进行参数配置，运行模式选中 “GLUE模式(Java)”；<br>
<span alt="fdf498cc4003625a57c740d3944c1397_MD5.png" src="fdf498cc4003625a57c740d3944c1397_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="fdf498cc4003625a57c740d3944c1397_MD5.png" src="attachments/fdf498cc4003625a57c740d3944c1397_md5.png" target="_self"></span></p></div><div><p dir="auto"><strong>步骤二：开发任务代码：</strong><br>
选中指定任务，点击该任务右侧“GLUE”按钮，将会前往GLUE任务的Web IDE界面，在该界面支持对任务代码进行开发（也可以在IDE中开发完成后，复制粘贴到编辑中）。<br>
版本回溯功能（支持30个版本的版本回溯）：在GLUE任务的Web IDE界面，选择右上角下拉框“版本回溯”，会列出该GLUE的更新历史，选择相应版本即可显示该版本代码，保存后GLUE代码即回退到对应的历史版本；<br>
<span alt="f67554ea870aaee07a20984c31c7d61d_MD5.png" src="f67554ea870aaee07a20984c31c7d61d_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="f67554ea870aaee07a20984c31c7d61d_MD5.png" src="attachments/f67554ea870aaee07a20984c31c7d61d_md5.png" target="_self"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="3.3 GLUE模式(Shell)" dir="auto" class="heading" id="3.3_GLUE模式(Shell)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>3.3 GLUE模式(Shell)</h3><div class="heading-children"><div><p dir="auto"><strong>步骤一：调度中心，新建调度任务</strong><br>
参考上文“配置属性详细说明”对新建的任务进行参数配置，运行模式选中 “GLUE模式(Shell)”；<br>
<strong>步骤二：开发任务代码：</strong><br>
选中指定任务，点击该任务右侧“GLUE”按钮，将会前往GLUE任务的Web IDE界面，在该界面支持对任务代码进行开发（也可以在IDE中开发完成后，复制粘贴到编辑中）。<br>
该模式的任务实际上是一段 “shell” 脚本；<br>
<span alt="fdf5d4d8a3c46b9490011795826db936_MD5.png" src="fdf5d4d8a3c46b9490011795826db936_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="fdf5d4d8a3c46b9490011795826db936_MD5.png" src="attachments/fdf5d4d8a3c46b9490011795826db936_md5.png" target="_self"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="3.4 GLUE模式(Python)" dir="auto" class="heading" id="3.4_GLUE模式(Python)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>3.4 GLUE模式(Python)</h3><div class="heading-children"><div><p dir="auto"><strong>步骤一：调度中心，新建调度任务</strong><br>
参考上文“配置属性详细说明”对新建的任务进行参数配置，运行模式选中 “GLUE模式(Python)”；<br>
<strong>步骤二：开发任务代码：</strong><br>
选中指定任务，点击该任务右侧“GLUE”按钮，将会前往GLUE任务的Web IDE界面，在该界面支持对任务代码进行开发（也可以在IDE中开发完成后，复制粘贴到编辑中）。<br>
该模式的任务实际上是一段 “python” 脚本；<br>
<span alt="3898bebc7aec00b0d9e0b6292f754316_MD5.png" src="3898bebc7aec00b0d9e0b6292f754316_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="3898bebc7aec00b0d9e0b6292f754316_MD5.png" src="attachments/3898bebc7aec00b0d9e0b6292f754316_md5.png" target="_self"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="3.5 GLUE模式(NodeJS)" dir="auto" class="heading" id="3.5_GLUE模式(NodeJS)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>3.5 GLUE模式(NodeJS)</h3><div class="heading-children"><div><p dir="auto"><strong>步骤一：调度中心，新建调度任务</strong><br>
参考上文“配置属性详细说明”对新建的任务进行参数配置，运行模式选中 “GLUE模式(NodeJS)”；<br>
<strong>步骤二：开发任务代码：</strong><br>
选中指定任务，点击该任务右侧“GLUE”按钮，将会前往GLUE任务的Web IDE界面，在该界面支持对任务代码进行开发（也可以在IDE中开发完成后，复制粘贴到编辑中）。<br>
该模式的任务实际上是一段 “nodejS” 脚本；</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="四、任务管理" dir="auto" class="heading" id="四、任务管理"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>四、任务管理</h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="4.0 配置执行器" dir="auto" class="heading" id="4.0_配置执行器"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.0 配置执行器</h3><div class="heading-children"><div><p dir="auto">点击进入"执行器管理"界面, 如下图:<br>
<span alt="48bc7daeef3855202933b02eb62a9f57_MD5.png" src="48bc7daeef3855202933b02eb62a9f57_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="48bc7daeef3855202933b02eb62a9f57_MD5.png" src="attachments/48bc7daeef3855202933b02eb62a9f57_md5.png" target="_self"></span></p></div><div><p dir="auto">1、"调度中心OnLine:"右侧显示在线的"调度中心"列表, 任务执行结束后, 将会以failover的模式进行回调调度中心通知执行结果, 避免回调的单点风险;<br>
2、“执行器列表” 中显示在线的执行器列表, 可通过"OnLine 机器"查看对应执行器的集群机器。<br>
点击按钮 “+新增执行器” 弹框如下图, 可新增执行器配置:<br>
<span alt="684e9dfd22dbeeadc9d0aae4f6c6e9a4_MD5.png" src="684e9dfd22dbeeadc9d0aae4f6c6e9a4_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="684e9dfd22dbeeadc9d0aae4f6c6e9a4_MD5.png" src="attachments/684e9dfd22dbeeadc9d0aae4f6c6e9a4_md5.png" target="_self"></span></p></div><div><p dir="auto">执行器属性说明<br>
AppName: 是每个执行器集群的唯一标示AppName, 执行器会周期性以AppName为对象进行自动注册。可通过该配置自动发现注册成功的执行器, 供任务调度时使用;<br>
名称: 执行器的名称, 因为AppName限制字母数字等组成,可读性不强, 名称为了提高执行器的可读性;<br>
排序: 执行器的排序, 系统中需要执行器的地方,如任务新增, 将会按照该排序读取可用的执行器列表;<br>
注册方式：调度中心获取执行器地址的方式；<br>
自动注册：执行器自动进行执行器注册，调度中心通过底层注册表可以动态发现执行器机器地址；<br>
手动录入：人工手动录入执行器的地址信息，多地址逗号分隔，供调度中心使用；<br>
机器地址："注册方式"为"手动录入"时有效，支持人工维护执行器的地址信息；</p></div></div></div><div class="heading-wrapper"><h3 data-heading="4.1 新建任务" dir="auto" class="heading" id="4.1_新建任务"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.1 新建任务</h3><div class="heading-children"><div><p dir="auto">进入任务管理界面，点击“新增任务”按钮，在弹出的“新增任务”界面配置任务属性后保存即可。详情页参考章节 “三、任务详解”。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="4.2 编辑任务" dir="auto" class="heading" id="4.2_编辑任务"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.2 编辑任务</h3><div class="heading-children"><div><p dir="auto">进入任务管理界面，选中指定任务。点击该任务右侧“编辑”按钮，在弹出的“编辑任务”界面更新任务属性后保存即可，可以修改设置的任务属性信息：</p></div></div></div><div class="heading-wrapper"><h3 data-heading="4.3 编辑GLUE代码" dir="auto" class="heading" id="4.3_编辑GLUE代码"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.3 编辑GLUE代码</h3><div class="heading-children"><div><p dir="auto">该操作仅针对GLUE任务。<br>
选中指定任务，点击该任务右侧“GLUE”按钮，将会前往GLUE任务的Web IDE界面，在该界面支持对任务代码进行开发。可参考章节 “3.2 GLUE模式(Java)”。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="4.4 暂停/恢复任务" dir="auto" class="heading" id="4.4_暂停/恢复任务"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.4 暂停/恢复任务</h3><div class="heading-children"><div><p dir="auto">可对任务进行“暂停”和“恢复”操作。 需要注意的是，此处的暂停/恢复仅针对任务的后续调度触发行为，不会影响到已经触发的调度任务，如需终止已经触发的调度任务，可查看“4.8 终止运行中的任务”<br>
<span alt="a3c4b143ceecf3f029ce7d73c52e414a_MD5.png" src="a3c4b143ceecf3f029ce7d73c52e414a_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="a3c4b143ceecf3f029ce7d73c52e414a_MD5.png" src="attachments/a3c4b143ceecf3f029ce7d73c52e414a_md5.png" target="_self"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="4.5 手动触发一次调度" dir="auto" class="heading" id="4.5_手动触发一次调度"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.5 手动触发一次调度</h3><div class="heading-children"><div><p dir="auto">点击“执行”按钮，可手动触发一次任务调度，不影响原有调度规则。<br>
<span alt="62749fdef7888584ae3154e65bf98a2d_MD5.png" src="62749fdef7888584ae3154e65bf98a2d_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="62749fdef7888584ae3154e65bf98a2d_MD5.png" src="attachments/62749fdef7888584ae3154e65bf98a2d_md5.png" target="_self"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="4.6 查看调度日志" dir="auto" class="heading" id="4.6_查看调度日志"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.6 查看调度日志</h3><div class="heading-children"><div><p dir="auto">点击“日志”按钮，可以查看任务历史调度日志。在历史调入日志界面可查看每次任务调度的调度结果、执行结果等，点击“执行日志”按钮可查看执行器完整日志。<br>
<span alt="aa7c17cb421a9e2ae27edf644b60b4f5_MD5.png" src="aa7c17cb421a9e2ae27edf644b60b4f5_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="aa7c17cb421a9e2ae27edf644b60b4f5_MD5.png" src="attachments/aa7c17cb421a9e2ae27edf644b60b4f5_md5.png" target="_self"></span></p></div><div><p dir="auto"><span alt="c086f5dcc57fc27b21541eddf223349d_MD5.png" src="c086f5dcc57fc27b21541eddf223349d_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="c086f5dcc57fc27b21541eddf223349d_MD5.png" src="attachments/c086f5dcc57fc27b21541eddf223349d_md5.png" target="_self"></span></p></div><div><p dir="auto">调度时间："调度中心"触发本次调度并向"执行器"发送任务执行信号的时间；<br>
调度结果："调度中心"触发本次调度的结果，200表示成功，500或其他表示失败；<br>
调度备注："调度中心"触发本次调度的日志信息；<br>
执行器地址：本次任务执行的机器地址<br>
运行模式：触发调度时任务的运行模式，运行模式可参考章节 “三、任务详解”；<br>
任务参数：本地任务执行的入参<br>
执行时间："执行器"中本次任务执行结束后回调的时间；<br>
执行结果："执行器"中本次任务执行的结果，200表示成功，500或其他表示失败；<br>
执行备注："执行器"中本次任务执行的日志信息；<br>
操作：<br>
"执行日志"按钮：点击可查看本地任务执行的详细日志信息；详见“4.7 查看执行日志”；<br>
"终止任务"按钮：点击可终止本地调度对应执行器上本任务的执行线程，包括未执行的阻塞任务一并被终止；</p></div></div></div><div class="heading-wrapper"><h3 data-heading="4.7 查看执行日志" dir="auto" class="heading" id="4.7_查看执行日志"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.7 查看执行日志</h3><div class="heading-children"><div><p dir="auto"><span alt="6e35e78902cc6e2232592f868e628434_MD5.png" src="6e35e78902cc6e2232592f868e628434_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="6e35e78902cc6e2232592f868e628434_MD5.png" src="attachments/6e35e78902cc6e2232592f868e628434_md5.png" target="_self"></span></p></div><div><p dir="auto">点击执行日志右侧的 “执行日志” 按钮，可跳转至执行日志界面，可以查看业务代码中打印的完整日志，如下图；</p></div></div></div><div class="heading-wrapper"><h3 data-heading="4.8 终止运行中的任务" dir="auto" class="heading" id="4.8_终止运行中的任务"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.8 终止运行中的任务</h3><div class="heading-children"><div><p dir="auto">仅针对执行中的任务。 在任务日志界面，点击右侧的“终止任务”按钮，将会向本次任务对应的执行器发送任务终止请求，将会终止掉本次任务，同时会清空掉整个任务执行队列。<br>
<span alt="d00fb65c2dcb725e1ca36a57c57a434d_MD5.png" src="d00fb65c2dcb725e1ca36a57c57a434d_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="d00fb65c2dcb725e1ca36a57c57a434d_MD5.png" src="attachments/d00fb65c2dcb725e1ca36a57c57a434d_md5.png" target="_self"></span></p></div><div><p dir="auto">任务终止时通过 “interrupt” 执行线程的方式实现, 将会触发 “InterruptedException” 异常。因此如果JobHandler内部catch到了该异常并消化掉的话, 任务终止功能将不可用。<br>
因此, 如果遇到上述任务终止不可用的情况, 需要在JobHandler中应该针对 “InterruptedException” 异常进行特殊处理 (向上抛出) , 正确逻辑如下:</p></div><div><pre dir="auto" class="language-java" tabindex="0"><code class="language-java is-loaded"><span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token comment">// TODO</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">而且，在JobHandler中开启子线程时，子线程也不可catch处理"InterruptedException"，应该主动向上抛出。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="4.9 删除执行日志" dir="auto" class="heading" id="4.9_删除执行日志"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.9 删除执行日志</h3><div class="heading-children"><div><p dir="auto">在任务日志界面，选中执行器和任务之后，点击右侧的"删除"按钮将会出现"日志清理"弹框，弹框中支持选择不同类型的日志清理策略，选中后点击"确定"按钮即可进行日志清理操<br>
<span alt="24e1b0c89fa6cd64cef71ff8da4b18e5_MD5.png" src="24e1b0c89fa6cd64cef71ff8da4b18e5_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="24e1b0c89fa6cd64cef71ff8da4b18e5_MD5.png" src="attachments/24e1b0c89fa6cd64cef71ff8da4b18e5_md5.png" target="_self"></span></p></div><div><p dir="auto"><span alt="602f93fa5c4ef1a44ffdd09f16edef5d_MD5.png" src="602f93fa5c4ef1a44ffdd09f16edef5d_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="602f93fa5c4ef1a44ffdd09f16edef5d_MD5.png" src="attachments/602f93fa5c4ef1a44ffdd09f16edef5d_md5.png" target="_self"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="4.10 删除任务" dir="auto" class="heading" id="4.10_删除任务"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4.10 删除任务</h3><div class="heading-children"><div><p dir="auto">点击删除按钮，可以删除对应任务。<br>
<span alt="941f7c8670ab7f5567acfd887c0f576f_MD5.png" src="941f7c8670ab7f5567acfd887c0f576f_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="941f7c8670ab7f5567acfd887c0f576f_MD5.png" src="attachments/941f7c8670ab7f5567acfd887c0f576f_md5.png" target="_self"></span></p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="五、总体设计" dir="auto" class="heading" id="五、总体设计"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>五、总体设计</h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="5.1 源码目录介绍" dir="auto" class="heading" id="5.1_源码目录介绍"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.1 源码目录介绍</h3><div class="heading-children"><div><ul dir="auto">
<li data-line="0" dir="auto">/doc :文档资料</li>
<li data-line="1" dir="auto">/db :“调度数据库”建表脚本</li>
<li data-line="2" dir="auto">/xxl-job-admin :调度中心，项目源码</li>
<li data-line="3" dir="auto">/xxl-job-core :公共Jar依赖</li>
<li data-line="4" dir="auto">/xxl-job-executor-samples :执行器，Sample示例项目（大家可以在该项目上进行开发，也可以将现有项目改造生成执行器项目）</li>
</ul></div></div></div><div class="heading-wrapper"><h3 data-heading="5.2 “调度数据库”配置" dir="auto" class="heading" id="5.2_“调度数据库”配置"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.2 “调度数据库”配置</h3><div class="heading-children"><div><p dir="auto">XXL-JOB调度模块基于Quartz集群实现，其“调度数据库”是在Quartz的11张集群mysql表基础上扩展而成。<br>
XXL-JOB首先定制了Quartz原生表结构前缀（XXL_JOBQRTZ）。<br>
<span alt="a21eac7915e3b1542a2a5e5981961a21_MD5.png" src="a21eac7915e3b1542a2a5e5981961a21_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="a21eac7915e3b1542a2a5e5981961a21_MD5.png" src="attachments/a21eac7915e3b1542a2a5e5981961a21_md5.png" target="_self"></span></p></div><div><p dir="auto">然后，在此基础上新增了几张张扩展表，如下：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">XXL_JOB_QRTZ_TRIGGER_GROUP：执行器信息表，维护任务执行器信息；</li>
<li data-line="1" dir="auto">XXL_JOB_QRTZ_TRIGGER_REGISTRY：执行器注册表，维护在线的执行器和调度中心机器地址信息；</li>
<li data-line="2" dir="auto">XXL_JOB_QRTZ_TRIGGER_INFO：调度扩展信息表： 用于保存XXL-JOB调度任务的扩展信息，如任务分组、任务名、机器地址、执行器、执行入参和报警邮件等等；</li>
<li data-line="3" dir="auto">XXL_JOB_QRTZ_TRIGGER_LOG：调度日志表： 用于保存XXL-JOB任务调度的历史信息，如调度结果、执行结果、调度入参、调度机器和执行器等等；</li>
<li data-line="4" dir="auto">XXL_JOB_QRTZ_TRIGGER_LOGGLUE：任务GLUE日志：用于保存GLUE更新历史，用于支持GLUE的版本回溯功能；</li>
<li data-line="5" dir="auto">因此，XXL-JOB调度数据库共计用于16张数据库表。</li>
</ul></div></div></div><div class="heading-wrapper"><h3 data-heading="5.3 架构设计" dir="auto" class="heading" id="5.3_架构设计"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.3 架构设计</h3><div class="heading-children"><div><p dir="auto"><strong>5.3.1 设计思想</strong><br>
将调度行为抽象形成“调度中心”公共平台，而平台自身并不承担业务逻辑，“调度中心”负责发起调度请求。<br>
将任务抽象成分散的JobHandler，交由“执行器”统一管理，“执行器”负责接收调度请求并执行对应的JobHandler中业务逻辑。<br>
因此，“调度”和“任务”两部分可以相互解耦，提高系统整体稳定性和扩展性；<br>
<strong>5.3.2 系统组成</strong><br>
调度模块（调度中心）： 负责管理调度信息，按照调度配置发出调度请求，自身不承担业务代码。调度系统与任务解耦，提高了系统可用性和稳定性，同时调度系统性能不再受限于任务模块； 支持可视化、简单且动态的管理调度信息，包括任务新建，更新，删除，GLUE开发和任务报警等，所有上述操作都会实时生效，同时支持监控调度结果以及执行日志，支持执行器Failover。<br>
执行模块（执行器）： 负责接收调度请求并执行任务逻辑。任务模块专注于任务的执行等操作，开发和维护更加简单和高效； 接收“调度中心”的执行请求、终止请求和日志请求等。<br>
<strong>5.3.3 架构图</strong><br>
<span alt="86f5b7bb21d36a1739af25d81fe5a4fa_MD5.png" src="86f5b7bb21d36a1739af25d81fe5a4fa_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="86f5b7bb21d36a1739af25d81fe5a4fa_MD5.png" src="attachments/86f5b7bb21d36a1739af25d81fe5a4fa_md5.png" target="_self"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="5.4 调度模块剖析" dir="auto" class="heading" id="5.4_调度模块剖析"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.4 调度模块剖析</h3><div class="heading-children"><div><p dir="auto"><strong>5.4.1 quartz的不足</strong><br>
Quartz作为开源作业调度中的佼佼者，是作业调度的首选。但是集群环境中Quartz采用API的方式对任务进行管理，从而可以避免上述问题，但是同样存在以下问题：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">问题一：调用API的的方式操作任务，不人性化；</li>
<li data-line="1" dir="auto">问题二：需要持久化业务QuartzJobBean到底层数据表中，系统侵入性相当严重。</li>
<li data-line="2" dir="auto">问题三：调度逻辑和QuartzJobBean耦合在同一个项目中，这将导致一个问题，在调度任务数量逐渐增多，同时调度任务逻辑逐渐加重的情况加，此时调度系统的性能将大大受限于业务；<br>
XXL-JOB弥补了quartz的上述不足之处。<br>
<strong>5.4.2 RemoteHttpJobBean</strong><br>
常规Quartz的开发，任务逻辑一般维护在QuartzJobBean中，耦合很严重。XXL-JOB中“调度模块”和“任务模块”完全解耦，调度模块中的所有调度任务使用同一个QuartzJobBean，即RemoteHttpJobBean。不同的调度任务将各自参数维护在各自扩展表数据中，当触发RemoteHttpJobBean执行时，将会解析不同的任务参数发起远程调用，调用各自的远程执行器服务。<br>
这种调用模型类似RPC调用，RemoteHttpJobBean提供调用代理的功能，而执行器提供远程服务的功能。<br>
<strong>5.4.3 调度中心HA（集群）</strong><br>
基于Quartz的集群方案，数据库选用Mysql；集群分布式并发环境中使用QUARTZ定时任务调度，会在各个节点会上报任务，存到数据库中，执行时会从数据库中取出触发器来执行，如果触发器的名称和执行时间相同，则只有一个节点去执行此任务。</li>
</ul></div><div><pre dir="auto" class="language-properties" tabindex="0"><code class="language-properties is-loaded"><span class="token key attr-name">`#</span> <span class="token value attr-value">for cluster</span>
<span class="token key attr-name">org.quartz.jobStore.tablePrefix</span> <span class="token punctuation">=</span> <span class="token value attr-value">XXL_JOB_QRTZ_</span>
<span class="token key attr-name">org.quartz.scheduler.instanceId</span><span class="token punctuation">:</span> <span class="token value attr-value">AUTO</span>
<span class="token key attr-name">org.quartz.jobStore.class</span><span class="token punctuation">:</span> <span class="token value attr-value">org.quartz.impl.jdbcjobstore.JobStoreTX</span>
<span class="token key attr-name">org.quartz.jobStore.isClustered</span><span class="token punctuation">:</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">org.quartz.jobStore.clusterCheckinInterval</span><span class="token punctuation">:</span> <span class="token value attr-value">1000` </span>


</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><strong>5.4.4 调度线程池</strong><br>
默认线程池中线程的数量为10个，避免单线程因阻塞而引起任务调度延迟。</p></div><div><pre dir="auto" class="language-properties" tabindex="0"><code class="language-properties is-loaded"><span class="token key attr-name">org.quartz.threadPool.class</span><span class="token punctuation">:</span> <span class="token value attr-value">org.quartz.simpl.SimpleThreadPool</span>
<span class="token key attr-name">org.quartz.threadPool.threadCount</span><span class="token punctuation">:</span> <span class="token value attr-value">10</span>
<span class="token key attr-name">org.quartz.threadPool.threadPriority</span><span class="token punctuation">:</span> <span class="token value attr-value">5</span>
<span class="token key attr-name">org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread</span><span class="token punctuation">:</span> <span class="token value attr-value">true</span>

</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">XXL-JOB系统中业务逻辑在远程执行器执行，调度中心每次调度仅仅负责一次调度请求，执行器会将请求存入执行队列并且立即响应调度中心；相比直接在quartz的QuartzJobBean中执行业务逻辑，差别就像大象和羽毛；<br>
XXL-JOB调度中心中每个JOB逻辑非常 “轻”，单个JOB一次运行平均耗时基本在 “100ms” 之内（基本是网络开销）；因此，可以保证使用有限的线程支撑大量的JOB并发运行；上面配置的10个线程至少可以支撑100个JOB正常运行；<br>
<strong>5.4.5 @DisallowConcurrentExecution</strong><br>
XXL-JOB调度模块的“调度中心”默认不使用该注解，即默认开启并行机制，因为RemoteHttpJobBean为公共QuartzJobBean，这样在多线程调度的情况下，调度模块被阻塞的几率很低，大大提高了调度系统的承载量。<br>
XXL-JOB的每个调度任务虽然在调度模块是并行调度执行的，但是任务调度传递到任务模块的“执行器”确实串行执行的，同时支持任务终止。<br>
<strong>5.4.6 misfire</strong><br>
错过了触发时间，处理规则。 可能原因：服务重启；调度线程被QuartzJobBean阻塞，线程被耗尽；某个任务启用了@DisallowConcurrentExecution，上次调度持续阻塞，下次调度被错过；<br>
quartz.properties中关于misfire的阀值配置如下，单位毫秒：<br>
org.quartz.jobStore.misfireThreshold: 60000<br>
Misfire规则： withMisfireHandlingInstructionDoNothing：不触发立即执行，等待下次调度； withMisfireHandlingInstructionIgnoreMisfires：以错过的第一个频率时间立刻开始执行； withMisfireHandlingInstructionFireAndProceed：以当前时间为触发频率立刻触发一次执行；<br>
XXL-JOB默认misfire规则为：withMisfireHandlingInstructionDoNothing</p></div><div><pre dir="auto" class="language-java" tabindex="0"><code class="language-java is-loaded"><span class="token class-name">CronScheduleBuilder</span> cronScheduleBuilder <span class="token operator">=</span> <span class="token class-name">CronScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">cronSchedule</span><span class="token punctuation">(</span>jobInfo<span class="token punctuation">.</span><span class="token function">getJobCron</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withMisfireHandlingInstructionDoNothing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">CronTrigger</span> cronTrigger <span class="token operator">=</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span>triggerKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span>cronScheduleBuilder<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><strong>5.4.7 日志回调服务</strong><br>
调度模块的“调度中心”作为Web服务部署时，一方面承担调度中心功能，另一方面也为执行器提供API服务。<br>
调度中心提供的"日志回调服务API服务"代码位置如下：</p></div><div><pre dir="auto"><code>xxl-job-admin#com.xxl.job.admin.controller.JobApiController.callback 

</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">“执行器”在接收到任务执行请求后，执行任务，在执行结束之后会将执行结果回调通知“调度中心”：<br>
<strong>5.4.8 任务HA（Failover）</strong><br>
执行器如若集群部署，调度中心将会感知到在线的所有执行器，如“127.0.0.1:9997, 127.0.0.1:9998, 127.0.0.1:9999”。<br>
当任务"路由策略"选择"故障转移(FAILOVER)“时，当调度中心每次发起调度请求时，会按照顺序对执行器发出心跳检测请求，第一个检测为存活状态的执行器将会被选定并发送调度请<br>
<span alt="31f7d92729b4c698722d6d80f851c2d2_MD5.png" src="31f7d92729b4c698722d6d80f851c2d2_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="31f7d92729b4c698722d6d80f851c2d2_MD5.png" src="attachments/31f7d92729b4c698722d6d80f851c2d2_md5.png" target="_self"></span></p></div><div><p dir="auto">调度成功后，可在日志监控界面查看“调度备注”，如下；<br>
<span alt="07287211072bb81deb9ab376fa3719ee_MD5.png" src="07287211072bb81deb9ab376fa3719ee_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="07287211072bb81deb9ab376fa3719ee_MD5.png" src="attachments/07287211072bb81deb9ab376fa3719ee_md5.png" target="_self"></span></p></div><div><p dir="auto">“调度备注”可以看出本地调度运行轨迹，执行器的"注册方式”、“地址列表"和任务的"路由策略”。"故障转移(FAILOVER)"路由策略下，调度中心首先对第一个地址进行心跳检测，心跳失败因此自动跳过，第二个依然心跳检测失败…… 直至心跳检测第三个地址“127.0.0.1:9999”成功，选定为“目标执行器”；然后对“目标执行器”发送调度请求，调度流程结束，等待执行器回调执行结果。<br>
<strong>5.4.9 调度日志</strong><br>
调度中心每次进行任务调度，都会记录一条任务日志，任务日志主要包括以下三部分内容：<br>
任务信息：包括“执行器地址”、“JobHandler”和“执行参数”等属性，根据这些参数，可以精确的定位任务执行的具体机器和任务代码；<br>
调度信息：包括“调度时间”、“调度结果”和“调度日志”等，根据这些参数，可以了解“调度中心”发起调度请求时具体情况。<br>
执行信息：包括“执行时间”、“执行结果”和“执行日志”等，根据这些参数，可以了解在“执行器”端任务执行的具体情况；<br>
<span alt="76cf302f348d3a3824a34f51d4d44da2_MD5.png" src="76cf302f348d3a3824a34f51d4d44da2_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="76cf302f348d3a3824a34f51d4d44da2_MD5.png" src="attachments/76cf302f348d3a3824a34f51d4d44da2_md5.png" target="_self"></span></p></div><div><p dir="auto">调度日志，针对单次调度，属性说明如下：<br>
执行器地址：任务执行的机器地址；<br>
JobHandler：Bean模式表示任务执行的JobHandler名称；<br>
任务参数：任务执行的入参；<br>
调度时间：调度中心，发起调度的时间；<br>
调度结果：调度中心，发起调度的结果，SUCCESS或FAIL；<br>
调度备注：调度中心，发起调度的备注信息，如地址心跳检测日志等；<br>
执行时间：执行器，任务执行结束后回调的时间；<br>
执行结果：执行器，任务执行的结果，SUCCESS或FAIL；<br>
执行备注：执行器，任务执行的备注信息，如异常日志等；<br>
执行日志：任务执行过程中，业务代码中打印的完整执行日志，见“4.7 查看执行日志”；<br>
<strong>5.4.10 任务依赖</strong><br>
原理：XXL-JOB中每个任务都对应有一个任务Key，同时，每个任务支持设置属性“子任务Key”，因此，通过“任务Key”可以匹配任务依赖关系。<br>
当父任务执行结束并且执行成功时，将会根据“子任务Key”匹配子任务依赖，如果匹配到子任务，将会主动触发一次子任务的执行。<br>
在任务日志界面，点击任务的“执行备注”的“查看”按钮，可以看到匹配子任务以及触发子任务执行的日志信息，如无信息则表示未触发子任务执行，可参考下图。<br>
<span alt="a55021810a5a2ff13b70d00d68561d9c_MD5.png" src="a55021810a5a2ff13b70d00d68561d9c_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="a55021810a5a2ff13b70d00d68561d9c_MD5.png" src="attachments/a55021810a5a2ff13b70d00d68561d9c_md5.png" target="_self"></span></p></div><div><p dir="auto"><span alt="67c8ad806b5dbca070edfb81cfe11ab1_MD5.png" src="67c8ad806b5dbca070edfb81cfe11ab1_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="67c8ad806b5dbca070edfb81cfe11ab1_MD5.png" src="attachments/67c8ad806b5dbca070edfb81cfe11ab1_md5.png" target="_self"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="5.5 任务 “运行模式” 剖析" dir="auto" class="heading" id="5.5_任务_“运行模式”_剖析"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.5 任务 “运行模式” 剖析</h3><div class="heading-children"><div><p dir="auto"><strong>5.5.1 “Bean模式” 任务</strong><br>
开发步骤：可参考 “章节三” ； 原理：每个Bean模式任务都是一个Spring的Bean类实例，它被维护在“执行器”项目的Spring容器中。任务类需要加“@JobHander(value=“名称”)”注解，因为“执行器”会根据该注解识别Spring容器中的任务。任务类需要继承统一接口“IJobHandler”，任务逻辑在execute方法中开发，因为“执行器”在接收到调度中心的调度请求时，将会调用“IJobHandler”的execute方法，执行任务逻辑。<br>
<strong>5.5.2 “GLUE模式(Java)” 任务</strong><br>
开发步骤：可参考 “章节三” ； 原理：每个 “GLUE模式(Java)” 任务的代码，实际上是“一个继承自“IJobHandler”的实现类的类代码”，“执行器”接收到“调度中心”的调度请求时，会通过Groovy类加载器加载此代码，实例化成Java对象，同时注入此代码中声明的Spring服务（请确保Glue代码中的服务和类引用在“执行器”项目中存在），然后调用该对象的execute方法，执行任务逻辑。<br>
<strong>5.5.3 GLUE模式(Shell) + GLUE模式(Python) + GLUE模式(NodeJS)</strong><br>
开发步骤：可参考 “章节三” ； 原理：脚本任务的源码托管在调度中心，脚本逻辑在执行器运行。当触发脚本任务时，执行器会加载脚本源码在执行器机器上生成一份脚本文件，然后通过Java代码调用该脚本；并且实时将脚本输出日志写到任务日志文件中，从而在调度中心可以实时监控脚本运行情况；脚本返回码为0时表示执行成功，其他标示执行失败。<br>
目前支持的脚本类型如下：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">shell脚本：任务运行模式选择为 "GLUE模式(Shell)"时支持 “shell” 脚本任务；</li>
<li data-line="1" dir="auto">python脚本：任务运行模式选择为 "GLUE模式(Python)"时支持 “python” 脚本任务；</li>
<li data-line="2" dir="auto">nodejs脚本：务运行模式选择为 "GLUE模式(NodeJS)"时支持 “nodejs” 脚本任务；<br>
<strong>5.5.4 执行器</strong><br>
执行器实际上是一个内嵌的Jetty服务器，默认端口9999，如下图配置文件所示（参数：xxl.job.executor.port）。<br>
<span alt="a979f07bbcdd4bd7a95c5aae56fe0d27_MD5.png" src="a979f07bbcdd4bd7a95c5aae56fe0d27_MD5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="a979f07bbcdd4bd7a95c5aae56fe0d27_MD5.png" src="attachments/a979f07bbcdd4bd7a95c5aae56fe0d27_md5.png" target="_self"></span>
在项目启动时，执行器会通过“@JobHander”识别Spring容器中“Bean模式任务”，以注解的value属性为key管理起来。<br>
“执行器”接收到“调度中心”的调度请求时，如果任务类型为“Bean模式”，将会匹配Spring容器中的“Bean模式任务”，然后调用其execute方法，执行任务逻辑。如果任务类型为“GLUE模式”，将会加载GLue代码，实例化Java对象，注入依赖的Spring服务（注意：Glue代码中注入的Spring服务，必须存在与该“执行器”项目的Spring容器中），然后调用execute方法，执行任务逻辑。<br>
<strong>5.5.5 任务日志</strong><br>
XXL-JOB会为每次调度请求生成一个单独的日志文件，需要通过 “XxlJobLogger.log” 打印执行日志，“调度中心”查看执行日志时将会加载对应的日志文件。<br>
(历史版本通过重写LOG4J的Appender实现，存在依赖限制，该方式在新版本已经被抛弃)<br>
日志文件存放的位置可在“执行器”配置文件进行自定义，默认目录格式为：/data/applogs/xxl-job/jobhandler/“格式化日期”/“数据库调度日志记录的主键ID.log”。<br>
在JobHandler中开启子线程时，子线程将会将会把日志打印在父线程即JobHandler的执行日志中，方便日志追踪。</li>
</ul></div></div></div><div class="heading-wrapper"><h3 data-heading="5.6 通讯模块剖析" dir="auto" class="heading" id="5.6_通讯模块剖析"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.6 通讯模块剖析</h3><div class="heading-children"><div><p dir="auto"><strong>5.6.1 一次完整的任务调度通讯流程</strong></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">1、“调度中心”向“执行器”发送http调度请求: “执行器”中接收请求的服务，实际上是一台内嵌jetty服务器，默认端口9999;</li>
<li data-line="1" dir="auto">2、“执行器”执行任务逻辑；</li>
<li data-line="2" dir="auto">3、“执行器”http回调“调度中心”调度结果: “调度中心”中接收回调的服务，是针对执行器开放一套API服务;<br>
<strong>5.6.2 通讯数据加密</strong><br>
调度中心向执行器发送的调度请求时使用RequestModel和ResponseModel两个对象封装调度请求参数和响应数据, 在进行通讯之前底层会将上述两个对象对象序列化，并进行数据协议以及时间戳检验,从而达到数据加密的功能;</li>
</ul></div></div></div><div class="heading-wrapper"><h3 data-heading="5.7 任务注册, 任务自动发现" dir="auto" class="heading" id="5.7_任务注册,_任务自动发现"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.7 任务注册, 任务自动发现</h3><div class="heading-children"><div><p dir="auto">自v1.5版本之后, 任务取消了"任务执行机器"属性, 改为通过任务注册和自动发现的方式, 动态获取远程执行器地址并执行。<br>
AppName: 每个执行器机器集群的唯一标示, 任务注册以 “执行器” 为最小粒度进行注册; 每个任务通过其绑定的执行器可感知对应的执行器机器列表;<br>
注册表: 见"XXL_JOB_QRTZ_TRIGGER_REGISTRY"表, “执行器” 在进行任务注册时将会周期性维护一条注册记录，即机器地址和AppName的绑定关系; “调度中心” 从而可以动态感知每个AppName在线的机器列表;<br>
执行器注册: 任务注册Beat周期默认30s; 执行器以一倍Beat进行执行器注册, 调度中心以一倍Beat进行动态任务发现; 注册信息的失效时间被三倍Beat;<br>
执行器注册摘除：执行器销毁时，将会主动上报调度中心并摘除对应的执行器机器信息，提高心跳注册的实时性；<br>
为保证系统"轻量级"并且降低学习部署成本，没有采用Zookeeper作为注册中心，采用DB方式进行任务注册发现；</p></div></div></div><div class="heading-wrapper"><h3 data-heading="5.8 任务执行结果" dir="auto" class="heading" id="5.8_任务执行结果"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.8 任务执行结果</h3><div class="heading-children"><div><p dir="auto">自v1.6.2之后，任务执行结果通过 “IJobHandler” 的返回值 “ReturnT” 进行判断； 当返回值符合 “ReturnT.code == ReturnT.SUCCESS_CODE” 时表示任务执行成功，否则表示任务执行失败，而且可以通过 “ReturnT.msg” 回调错误信息给调度中心； 从而，在任务逻辑中可以方便的控制任务执行结果；</p></div></div></div><div class="heading-wrapper"><h3 data-heading="5.9 分片广播 &amp; 动态分片" dir="auto" class="heading" id="5.9_分片广播_&amp;_动态分片"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.9 分片广播 &amp; 动态分片</h3><div class="heading-children"><div><p dir="auto">执行器集群部署时，任务路由策略选择"分片广播"情况下，一次任务调度将会广播触发对应集群中所有执行器执行一次任务，同时传递分片参数；可根据分片参数开发分片任务；<br>
“分片广播” 以执行器为维度进行分片，支持动态扩容执行器集群从而动态增加分片数量，协同进行业务处理；在进行大数据量业务操作时可显著提升任务处理能力和速度。<br>
“分片广播” 和普通任务开发流程一致，不同之处在于可以可以获取分片参数，获取分片参数对象的代码如下（可参考Sample示例执行器中的示例任务"ShardingJobHandler" ）：<br>
ShardingUtil.ShardingVO shardingVO = ShardingUtil.getShardingVo();<br>
该分片参数对象拥有两个属性：<br>
index：当前分片序号(从0开始)，执行器集群列表中当前执行器的序号；<br>
total：总分片数，执行器集群的总机器数量；<br>
该特性适用场景如：<br>
1、分片任务场景：10个执行器的集群来处理10w条数据，每台机器只需要处理1w条数据，耗时降低10倍；<br>
2、广播任务场景：广播执行器机器运行shell脚本、广播集群节点进行缓存更新等</p></div></div></div><div class="heading-wrapper"><h3 data-heading="5.10 访问令牌（AccessToken）" dir="auto" class="heading" id="5.10_访问令牌（AccessToken）"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.10 访问令牌（AccessToken）</h3><div class="heading-children"><div><p dir="auto">为提升系统安全性，调度中心和执行器进行安全性校验，双方AccessToken匹配才允许通讯；<br>
调度中心和执行器，可通过配置项 “xxl.job.accessToken” 进行AccessToken的设置。<br>
调度中心和执行器，如果需要正常通讯，只有两种设置；<br>
设置一：调度中心和执行器，均不设置AccessToken；关闭安全性校验；<br>
设置二：调度中心和执行器，设置了相同的AccessToken；</p></div></div></div><div class="heading-wrapper"><h3 data-heading="5.11 调度中心API服务" dir="auto" class="heading" id="5.11_调度中心API服务"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5.11 调度中心API服务</h3><div class="heading-children"><div><p dir="auto">调度中心提供了API服务，供执行器和业务方选择使用，目前提供的API服务有：<br>
1、任务结果回调服务；<br>
2、执行器注册服务；<br>
3、执行器注册摘除服务；<br>
4、触发任务单次执行服务，支持任务根据业务事件触发；<br>
调度中心API服务位置：com.xxl.job.core.biz.AdminBiz.java<br>
调度中心API服务请求参考代码：com.xxl.job.dao.impl.AdminBizTest.java</p></div><div class="mod-footer"></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="outline-tree tree-container"><div class="tree-item nav-folder mod-root" data-depth="0"><div class="tree-item-self nav-folder-title"><div class="tree-item-inner nav-folder-title-content">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all is-collapsed" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item-children nav-folder-children"><div class="nav-folder-spacer"></div><div class="tree-item is-collapsed" data-depth="1"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#XXL-JOB轻量级分布式任务调度框架文档" data-path="#XXL-JOB轻量级分布式任务调度框架文档"><div class="tree-item-inner heading-link" heading-name="XXL-JOB轻量级分布式任务调度框架文档">XXL-JOB轻量级分布式任务调度框架文档</div></a><div class="tree-item-children"><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#一、简介" data-path="#一、简介"><div class="tree-item-icon collapse-icon is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="一、简介">一、简介</div></a><div class="tree-item-children" style="display: none;"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#1.1_概述" data-path="#1.1_概述"><div class="tree-item-inner heading-link" heading-name="1.1 概述">1.1 概述</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#1.2_特性" data-path="#1.2_特性"><div class="tree-item-inner heading-link" heading-name="1.2 特性">1.2 特性</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#1.3_发展" data-path="#1.3_发展"><div class="tree-item-inner heading-link" heading-name="1.3 发展">1.3 发展</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#1.5_环境" data-path="#1.5_环境"><div class="tree-item-inner heading-link" heading-name="1.5 环境">1.5 环境</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#二、快速入门" data-path="#二、快速入门"><div class="tree-item-icon collapse-icon is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="二、快速入门">二、快速入门</div></a><div class="tree-item-children" style="display: none;"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#2.1_初始化“调度数据库”" data-path="#2.1_初始化“调度数据库”"><div class="tree-item-inner heading-link" heading-name="2.1 初始化“调度数据库”">2.1 初始化“调度数据库”</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#2.2_编译源码" data-path="#2.2_编译源码"><div class="tree-item-inner heading-link" heading-name="2.2 编译源码">2.2 编译源码</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#2.3_配置部署“调度中心”" data-path="#2.3_配置部署“调度中心”"><div class="tree-item-inner heading-link" heading-name="2.3 配置部署“调度中心”">2.3 配置部署“调度中心”</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#2.4_配置部署“执行器项目”" data-path="#2.4_配置部署“执行器项目”"><div class="tree-item-inner heading-link" heading-name="2.4 配置部署“执行器项目”">2.4 配置部署“执行器项目”</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#2.5_开发第一个任务“Hello_World”" data-path="#2.5_开发第一个任务“Hello_World”"><div class="tree-item-inner heading-link" heading-name="2.5 开发第一个任务“Hello World”">2.5 开发第一个任务“Hello World”</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#步骤二：“GLUE模式(Java)”_任务开发：" data-path="#步骤二：“GLUE模式(Java)”_任务开发："><div class="tree-item-inner heading-link" heading-name="步骤二：“GLUE模式(Java)” 任务开发：">步骤二：“GLUE模式(Java)” 任务开发：</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#三、任务详解" data-path="#三、任务详解"><div class="tree-item-icon collapse-icon is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="三、任务详解">三、任务详解</div></a><div class="tree-item-children" style="display: none;"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#\-_3.1_BEAN模式" data-path="#\-_3.1_BEAN模式"><div class="tree-item-inner heading-link" heading-name="\- 3.1 BEAN模式">- 3.1 BEAN模式</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#3.2_GLUE模式(Java)" data-path="#3.2_GLUE模式(Java)"><div class="tree-item-inner heading-link" heading-name="3.2 GLUE模式(Java)">3.2 GLUE模式(Java)</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#3.3_GLUE模式(Shell)" data-path="#3.3_GLUE模式(Shell)"><div class="tree-item-inner heading-link" heading-name="3.3 GLUE模式(Shell)">3.3 GLUE模式(Shell)</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#3.4_GLUE模式(Python)" data-path="#3.4_GLUE模式(Python)"><div class="tree-item-inner heading-link" heading-name="3.4 GLUE模式(Python)">3.4 GLUE模式(Python)</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#3.5_GLUE模式(NodeJS)" data-path="#3.5_GLUE模式(NodeJS)"><div class="tree-item-inner heading-link" heading-name="3.5 GLUE模式(NodeJS)">3.5 GLUE模式(NodeJS)</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#四、任务管理" data-path="#四、任务管理"><div class="tree-item-icon collapse-icon is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="四、任务管理">四、任务管理</div></a><div class="tree-item-children" style="display: none;"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.0_配置执行器" data-path="#4.0_配置执行器"><div class="tree-item-inner heading-link" heading-name="4.0 配置执行器">4.0 配置执行器</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.1_新建任务" data-path="#4.1_新建任务"><div class="tree-item-inner heading-link" heading-name="4.1 新建任务">4.1 新建任务</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.2_编辑任务" data-path="#4.2_编辑任务"><div class="tree-item-inner heading-link" heading-name="4.2 编辑任务">4.2 编辑任务</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.3_编辑GLUE代码" data-path="#4.3_编辑GLUE代码"><div class="tree-item-inner heading-link" heading-name="4.3 编辑GLUE代码">4.3 编辑GLUE代码</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.4_暂停/恢复任务" data-path="#4.4_暂停/恢复任务"><div class="tree-item-inner heading-link" heading-name="4.4 暂停/恢复任务">4.4 暂停/恢复任务</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.5_手动触发一次调度" data-path="#4.5_手动触发一次调度"><div class="tree-item-inner heading-link" heading-name="4.5 手动触发一次调度">4.5 手动触发一次调度</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.6_查看调度日志" data-path="#4.6_查看调度日志"><div class="tree-item-inner heading-link" heading-name="4.6 查看调度日志">4.6 查看调度日志</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.7_查看执行日志" data-path="#4.7_查看执行日志"><div class="tree-item-inner heading-link" heading-name="4.7 查看执行日志">4.7 查看执行日志</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.8_终止运行中的任务" data-path="#4.8_终止运行中的任务"><div class="tree-item-inner heading-link" heading-name="4.8 终止运行中的任务">4.8 终止运行中的任务</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.9_删除执行日志" data-path="#4.9_删除执行日志"><div class="tree-item-inner heading-link" heading-name="4.9 删除执行日志">4.9 删除执行日志</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#4.10_删除任务" data-path="#4.10_删除任务"><div class="tree-item-inner heading-link" heading-name="4.10 删除任务">4.10 删除任务</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#五、总体设计" data-path="#五、总体设计"><div class="tree-item-icon collapse-icon is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="五、总体设计">五、总体设计</div></a><div class="tree-item-children" style="display: none;"><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.1_源码目录介绍" data-path="#5.1_源码目录介绍"><div class="tree-item-inner heading-link" heading-name="5.1 源码目录介绍">5.1 源码目录介绍</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.2_“调度数据库”配置" data-path="#5.2_“调度数据库”配置"><div class="tree-item-inner heading-link" heading-name="5.2 “调度数据库”配置">5.2 “调度数据库”配置</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.3_架构设计" data-path="#5.3_架构设计"><div class="tree-item-inner heading-link" heading-name="5.3 架构设计">5.3 架构设计</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.4_调度模块剖析" data-path="#5.4_调度模块剖析"><div class="tree-item-inner heading-link" heading-name="5.4 调度模块剖析">5.4 调度模块剖析</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.5_任务_“运行模式”_剖析" data-path="#5.5_任务_“运行模式”_剖析"><div class="tree-item-inner heading-link" heading-name="5.5 任务 “运行模式” 剖析">5.5 任务 “运行模式” 剖析</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.6_通讯模块剖析" data-path="#5.6_通讯模块剖析"><div class="tree-item-inner heading-link" heading-name="5.6 通讯模块剖析">5.6 通讯模块剖析</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.7_任务注册,_任务自动发现" data-path="#5.7_任务注册,_任务自动发现"><div class="tree-item-inner heading-link" heading-name="5.7 任务注册, 任务自动发现">5.7 任务注册, 任务自动发现</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.8_任务执行结果" data-path="#5.8_任务执行结果"><div class="tree-item-inner heading-link" heading-name="5.8 任务执行结果">5.8 任务执行结果</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.9_分片广播_&amp;_动态分片" data-path="#5.9_分片广播_&amp;_动态分片"><div class="tree-item-inner heading-link" heading-name="5.9 分片广播 &amp; 动态分片">5.9 分片广播 &amp; 动态分片</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.10_访问令牌（AccessToken）" data-path="#5.10_访问令牌（AccessToken）"><div class="tree-item-inner heading-link" heading-name="5.10 访问令牌（AccessToken）">5.10 访问令牌（AccessToken）</div></a><div class="tree-item-children"></div></div><div class="tree-item is-collapsed" data-depth="3"><a class="tree-item-self is-clickable" href="知识库/工作技能/分布式/分布式事务架构/xxl-job轻量级分布式任务调度框架文档.html#5.11_调度中心API服务" data-path="#5.11_调度中心API服务"><div class="tree-item-inner heading-link" heading-name="5.11 调度中心API服务">5.11 调度中心API服务</div></a><div class="tree-item-children"></div></div></div></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>